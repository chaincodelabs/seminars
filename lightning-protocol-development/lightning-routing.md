# Lightning Routing

## Reading

| Content | Time \(min\) |
| :--- | :--- |
| [Network topology creation & maintenance](https://btctranscripts.com/scalingbitcoin/tel-aviv-2019/edgedevplusplus/lightning-network-topology/) | 30 |
| [Onion Routing \(video\)](https://youtu.be/toarjBSPFqI) | 15 |
| [Onion Routing - deep dive](https://btctranscripts.com/chaincode-labs/chaincode-residency/2019-06-25-christian-decker-onion-routing-deep-dive/) | 50 |
| [Payment Pathfinding for Reliability](https://www.youtube.com/watch?v=p8toOF-imk4) | 20 |
| [Routing problems and solutions \(ignore rendezvous except for historical comparison\)](https://btctranscripts.com/scalingbitcoin/tel-aviv-2019/edgedevplusplus/2019-09-09-carla-kirk-cohen-routing-problems-and-solutions/) | 35 |
| [Trampoline Onion Routing](https://github.com/lightningnetwork/lightning-rfc/blob/trampoline-routing-no-gossip/proposals/trampoline.md) | 25 |
| [Amount-independent payment routing in Lightning Networks](https://medium.com/coinmonks/amount-independent-payment-routing-in-lightning-networks-6409201ff5ed) | 15 |
| [Multi-path payments: Making Channel Balances Add Up](https://lightning.engineering/posts/2020-05-07-mpp/) | 20 |
| [Route Blinding](https://github.com/lightning/bolts/blob/master/proposals/route-blinding.md) | 40 |
| [Improving error attribution](https://lists.linuxfoundation.org/pipermail/lightning-dev/2022-October/003723.html) | 20 |
| [Rapid Gossip Sync](https://lightningdevkit.org/blog/announcing-rapid-gossip-sync/) | 20 |
| [Gossip Protocol/Path Finding](https://btctranscripts.com/chaincode-labs/chaincode-residency/2019-06-26-rene-pickhardt-path-finding-lightning-network/) | 80 |
| [Sphinx](https://github.com/t-bast/lightning-docs/blob/master/sphinx.md) | 30 |
| \(optional\) [Optimally Reliable & Cheap Payment Flows on the Lightning Network](https://arxiv.org/pdf/2107.05322.pdf) | 60 |

## Discussion Questions

1. What exactly is the negative impact of a routing failure?
2. How might payments get stuck/unstuck due to a routing failure?
3. What kinds of routing failures are there and are some more severe than others?"
4. Is the Lightning routing problem NP-hard?

### Network topology creation & maintenance

1. On the base layer, the quality of the nodes you connect to is largely irrelevant provided they are an honest peer. How does this differ in Lightning when opening a channel to a peer?
2. What practical measures can nodes wishing to route on Lightning take to improve their success? Does this cause issues for new entrants?

### Onion Routing - deep dive

1. How do we combine two partial onions?
2. When and why are ephemeral keys rotated? What would change if ephemeral keys were fully generated by the sender?

### Routing problems and solutions \(trampoline\)

1. What privacy tradeoffs do trampoline payments have? How can they be mitigated?
2. Can trampoline payments be combined with atomic multi-path payments to mitigate privacy issues?

### Multi-path payments \(MPP\)

1. What is the difference between MPP and AMP payment splitting?
2. What are the advantages and disadvantages of multipath routing?
3. What problems could arise if a node participates in multiple paths of a multi-path payment?

### Route Blinding

1. Blinded routes over-estimate sender fees and time locks to provide better receiver privacy. Discuss this trade-off.
2. Routing strategies such as route blinding and trampoline all add extra information to routing onions. Does this reduce privacy?

### Gossip Protocol/Path Finding

1. How can just-in-time routing help with routing payments?
2. How can a griefing attack affect routing nodes and what are possible counter measures?
